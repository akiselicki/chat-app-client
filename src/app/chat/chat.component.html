<div class="chat-container">

  <mat-toolbar color="primary" class="fixed-header">
    <mat-toolbar-row>
      <span>Room: {{ room?.name }}</span>
      <span class="spacer"></span>
      <mat-icon svgIcon="logout" (click)="leave()"></mat-icon>
    </mat-toolbar-row>
  </mat-toolbar>

  <mat-table #chat [dataSource]="dataSource" infiniteScroll [infiniteScrollDistance]="2" [infiniteScrollThrottle]="50" (scrolled)="getMessages()">
    <ng-container matColumnDef="date">
      <mat-header-cell *matHeaderCellDef>Time</mat-header-cell>
      <mat-cell *matCellDef="let msg">{{msg.date | date:'medium'}}</mat-cell>
    </ng-container>
    <ng-container matColumnDef="sender">
      <mat-header-cell *matHeaderCellDef>From</mat-header-cell>
      <mat-cell *matCellDef="let msg">{{msg.sender}}</mat-cell>
    </ng-container>
    <ng-container matColumnDef="message">
      <mat-header-cell *matHeaderCellDef>Message</mat-header-cell>
      <mat-cell *matCellDef="let msg" class="message-text-cell">{{msg.text}}</mat-cell>
    </ng-container>
    <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
    <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
  </mat-table>

  <form class="new-message-form center-content">
    <mat-form-field>
      <input matInput [(ngModel)]="message" name="new-message" autocomplete="off" />
    </mat-form-field>
    <button mat-button (click)="post()">
        <mat-icon color="primary">send</mat-icon>
    </button>
  </form>

</div>
